# 하드웨어

I/O 시스템은 컴퓨터와 외부 세계를 연결하는 매개체입니다. 운영체제가 I/O 작업을 효율적으로 수행하려면, 먼저 I/O 장치(Device) 자체의 하드웨어 구조와 작동 방식을 이해해야 합니다.

**1. I/O 장치의 분류**

I/O 장치는 작동 방식과 데이터 전송 방식에 따라 다양하게 분류됩니다.

* 저장 장치 (Storage Devices):
  * 데이터를 영구적으로 저장합니다.
  * 예: 하드 디스크 드라이브(HDD), 솔리드 스테이트 드라이브(SSD), 자기 테이프.
* 전송 장치 (Transmission Devices):
  * 네트워크를 통해 데이터를 송수신합니다.
  * 예: 네트워크 인터페이스 카드(NIC), 모뎀.
* 인터페이스 장치 (Human-Interface Devices):
  * 사용자와의 상호작용을 담당합니다.
  * 예: 키보드, 마우스, 모니터, 프린터.

**2. 장치 컨트롤러와 포트 (Device Controllers and Ports)**

I/O 장치는 \*\*포트(Port)\*\*를 통해 컴퓨터에 연결되며, \*\*장치 컨트롤러(Device Controller)\*\*에 의해 관리됩니다.

* 포트 (Port):
  * 장치와 컴퓨터 간의 연결점입니다.
  * 예: 직렬 포트, 병렬 포트, USB 포트 등.
* 버스 (Bus):
  * 여러 장치 컨트롤러와 CPU, 메모리를 연결하는 공유된 통신 경로입니다.
  * 가장 흔한 버스 유형은 PCI(Peripheral Component Interconnect) 버스와 PCIe(PCI Express) 버스입니다.
* 장치 컨트롤러 (Device Controller):
  * CPU와 I/O 장치 간의 통신을 중재하는 전자 회로 기판입니다.
  * 컨트롤러는 포트를 통해 연결된 하나 이상의 장치를 관리하며, 각 장치에 대한 \*\*레지스터(Register)\*\*와 \*\*로컬 버퍼(Local Buffer)\*\*를 포함합니다.
  * 로컬 버퍼: I/O 장치와 메인 메모리 간에 데이터가 전송될 때 임시로 데이터를 저장하는 역할을 합니다.

**3. I/O 통신 방식: 레지스터와 명령어**

CPU는 장치 컨트롤러와 통신하기 위해 메모리 맵핑 또는 I/O 포트 주소 지정 방식을 사용합니다.

* 데이터 레지스터 (Data Register):
  * CPU가 장치에 전송할 데이터나 장치에서 읽어 들인 데이터를 임시로 보관합니다.
* 상태 레지스터 (Status Register):
  * 장치의 현재 상태(예: 준비됨, 오류 발생, 전송 중 등)를 나타냅니다. CPU는 이 레지스터를 읽어 장치의 상태를 파악합니다.
* 명령 레지스터 (Command Register):
  * CPU가 장치 컨트롤러에 수행할 동작(예: 읽기, 쓰기, 초기화)을 명령할 때 사용합니다.

**4. I/O 작업의 주체**

I/O 작업은 CPU, 인터럽트, 또는 DMA(Direct Memory Access)를 통해 처리됩니다.

* 폴링 (Polling):
  * CPU가 장치 컨트롤러의 상태 레지스터를 주기적으로 반복해서 확인하여 장치가 준비되었는지 감시하는 방식입니다.
  * 장점: 구현이 간단하고 오버헤드가 적을 수 있습니다 (장치 대기 시간이 짧을 경우).
  * 단점: 장치 대기 시간이 길거나 I/O 요청이 많을 경우, CPU가 반복적인 검사에 시간을 낭비하는 오버헤드가 커집니다.
* 인터럽트 (Interrupt):
  * I/O 장치가 준비되거나 작업이 완료되면, CPU에게 인터럽트 신호를 보내 CPU의 주의를 끌고 작업을 요청하는 방식입니다.
  * 장점: CPU가 불필요하게 상태를 검사할 필요가 없어 CPU의 효율이 높아집니다.
  * 단점: 인터럽트 처리 자체에 오버헤드(문맥 교환)가 발생합니다.
* DMA (Direct Memory Access):
  * 고속 I/O 장치(예: 디스크, 네트워크)의 경우, CPU의 개입 없이 장치 컨트롤러가 직접 메인 메모리와 데이터 전송을 수행하도록 하는 방식입니다.
  * 작동: CPU는 DMA 컨트롤러에게 전송할 메모리 주소, 전송할 바이트 수, 전송 방향을 알려주고 I/O 작업을 위임합니다.
  * 효과: CPU는 데이터 전송 동안 다른 작업을 수행할 수 있어, I/O 처리 속도와 시스템 스루풋이 크게 향상됩니다.
