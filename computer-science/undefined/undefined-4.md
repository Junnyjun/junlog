# 프로세스 간 통신

프로세스는 시스템 내에서 독립적으로 실행되기도 하고 데이터를 주고받으며 협업하기도 한다.

프로세스가 다른 프로세스와 데이터를 주고받는 통신에는 같은 컴퓨터뿐만 아니라 다른 컴퓨터와의 통신도 포함된다.

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

🔴 프로세스 내부 데이터 통신 : 하나의 프로세스 내에 2개 이상의 스레드가 존재하는 경우이다.

전역 변수나 파일을 이용하여 데이터를 주고받는다

🟠 프로세스 간 데이터 통신 :  같은 컴퓨터에 있는 여러 프로세스끼리 통신하는 경우로, 공용 파일 또는 운영체제가 제공하는 파이프를 사용하여 통신한다

🟡 네트워크를 이용한 데이터 통신 :  여러 컴퓨터가 네트워크로 연결되어 있을 때도 통신이 가능한데, 이 경우 프세스는 소켓을 이용하여 데이터를 주고 받는다.

### 프로세스 간 통신의 분류&#x20;

함수 호출도 데이터를 주고 받는다는 의미에서 통신이라고 생각할 수도 있지만, 함수는 하나의 프로세스 내에서 순차적으로 실행되기 때문에 통신이라고 부르지 않는다.\
통신은 데이터가 전송되는 방향에 따라 양방향 , 반 양방향, 단방향으로 나뉜다.

#### 통신 구현 방식에 따른 분류

통신을 위해 상태변수를 설정하는데, 이  데이터를 확인하기 위해 수시로 확인하는 것을 `바쁜 대기` 라고한다.\
`바쁜 대기` 는 굉장히 자원 낭비를 하는 부분중 하나인데, 이를 해결하기 위해 데이터가 도착했음을 알려주는 동기화를 사용한다.

동기화 여부는 대기가 있는 통신(동기화) & 대기가 없는 통신(비동기화) 구분시켜준다.



### 프로세스간 통신의 종류

프로세스간 통신은 쓰기 연산& 읽기 연산 으로 간소화 할 수 있다.

이중 가장 중요한 프로세스 동기화를 알아 보도록 한다.

🔴 전역 변수를 이용한 통신

공통으로 관리하는 메모리를 이용하여 데이터를 주고 받는 방법이다.

각자 전역변수에 값을 쓰거나&읽는다&#x20;

🟠 파일을 이용한 통신

저장 장치에 파일을 읽고 쓰는 코드이다. `open` ➡ `write` ➡ `close`  의 단계를 가진다

파일 내의 데이터는 한줄로 저장되는데 이러한 파일을 순차 파일이라 하며,&#x20;

순차적 접근으로 사용하게 된다.

🟡 파이프를 이용한 통신

동기화 문제를 해결하는 파이프 방식의 통신이 있다. `open` ➡ `close` 의 단계를 가진다

단방향 통신 시스템이며, 이름없는 파이프와 이름있는 파이프가 존재한다.



🟢 소켓을 이용한 통신

네트워킹 상황에서의 통신은 프로시저 호출 & 호출을 사용한다.

프로시저는 상대방 측 함수를 실행하는 것이라고 볼 수 있는데 소켓을 이용하여 구현한다.



### 공유 자원과 임계 구역

공유 자원은 여러 프로세스가 공동으로 이용하는 변수,메모리 파일 이다.

2개 이상의 프로세스가 공유 자원을 동시에 이용할 때 `경쟁 조건` 이 발생 했다고 한다

#### 임계 구역

공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램의 영역을 임계 구역 이라고 한다.

임계 구역은 독립적으로 서로 작업을 하여 데이터가 맞지 않는 문제가 발생한다

🔴 상호 배제  :  한 프로세스가 임계 구역에 들어가면 다른 프로세스는 접근할 수 없다.

🟠 한정 대기 : 한 프로세스가 무한정 기다려서는 안된다.

🟡 진행의 융통성 : 한 프로세스가 다른 프로세스를 방해해선 안된다.



임계구역을 해결하는 가장 단순한 방법으로는 `Lock` 을 사용하는 것 이다.



`피터슨 알고리즘`: 두 프로세스가 동시에 Lcok을 설정하는 경우 대비하기 위해 고안되었다.

`데커 알고리즘` :  우선 잠금,  잠금을 확인, 잠금 순서 확인 하는 방식으로 사용한다,



#### 세마포어

세마포어는 임계구역에 진입하기 전 스위치를 사용 중으로 놓고 임계 구역에 들어간다.

그 이후 프로세스는 작업을 기다리며, 프로세스가 작업을 마치면 동기화 신호를 보낸다

#### 모니터

세마포어가 임계구역을 보호하지 못하는 경우를 위해 고안 되었다. 공유자원을 인터페이스만 제공함으로써 자원을 공유하고 동기화를 시킨다.





