# 세션 상태

\*\*세션 상태(Session State)\*\*에 대해 다룹니다. 세션 상태는 사용자와의 상호작용 중 발생하는 데이터를 의미하며, 이러한 데이터는 비즈니스 트랜잭션 중에 사용되지만 아직 데이터베이스에 커밋되지 않은 상태입니다. 이 장에서는 세션 상태의 필요성과 이를 저장하는 다양한 방법에 대해 설명합니다.

### 세션의 상태 유지와 무상태성

\*\*무상태성(statelessness)\*\*은 서버가 각 요청을 독립적으로 처리하고, 이전 요청의 정보를 유지하지 않는 것을 의미합니다. 무상태 서버는 높은 트래픽의 웹사이트에서 매우 유용하며, HTTP 프로토콜의 본질과도 잘 맞습니다. 그러나 많은 경우, 클라이언트와의 상호작용은 상태를 유지해야 하며, 이러한 상호작용을 처리하기 위해 세션 상태가 필요합니다.

#### 세션 상태의 종류

세션 상태는 다음과 같이 분류될 수 있습니다:

* **세션 상태(Session State)**: 비즈니스 트랜잭션 중에 사용되는 데이터로, 트랜잭션이 커밋되기 전까지는 다른 세션과 분리되어야 합니다.
* **레코드 데이터(Record Data)**: 데이터베이스에 영구적으로 저장되며, 모든 세션에서 접근 가능한 데이터입니다.

세션 상태는 비즈니스 트랜잭션 중에 일시적으로 사용되며, 이 데이터가 트랜잭션 종료 시점에서 커밋되어야 레코드 데이터가 됩니다.

### 세션 상태 저장 방법

세션 상태를 저장하는 방법에는 다음 세 가지가 있습니다:

1. **클라이언트 세션 상태(Client Session State)**: 데이터를 클라이언트 측에 저장합니다. 예를 들어, URL 인코딩, 쿠키, 숨겨진 필드(hidden field), 또는 클라이언트 측 객체로 데이터를 저장할 수 있습니다.
2. **서버 세션 상태(Server Session State)**: 데이터를 서버의 메모리에 저장하거나, 직렬화된 객체를 로컬 파일 시스템이나 공유 데이터 소스에 저장합니다.
3. **데이터베이스 세션 상태(Database Session State)**: 데이터를 데이터베이스에 테이블과 필드로 저장하여, 일반적인 영구 데이터와 유사하게 관리합니다.

각 방법에는 장단점이 있습니다. 클라이언트 세션 상태는 네트워크를 통해 데이터를 전송해야 하므로 대용량 데이터를 처리하기에 부적합할 수 있습니다. 서버 세션 상태는 서버 자원을 효율적으로 사용하지만, 세션 데이터가 서버에 종속적이기 때문에 서버 간 이동(세션 마이그레이션)이 어려울 수 있습니다. 데이터베이스 세션 상태는 데이터의 무결성을 보장할 수 있지만, 응답성이 떨어질 수 있습니다.

### 세션 상태 관리의 이슈

* **데이터 전송 및 성능**: 클라이언트 세션 상태는 데이터가 클라이언트와 서버 간에 전송되므로 성능에 영향을 미칠 수 있습니다. 반면 서버 세션 상태와 데이터베이스 세션 상태는 데이터 접근 시간이 더 길어질 수 있습니다.
* **데이터 격리**: 세션 상태는 다른 세션과 격리되어야 하며, 특히 데이터베이스 세션 상태를 사용할 때 세션 데이터와 영구 데이터를 분리하는 것이 중요합니다.
* **세션 마이그레이션**: 서버 세션 상태를 사용하는 경우, 서버 간 세션 데이터를 이동하는 것이 어려울 수 있습니다. 세션 마이그레이션이 필요한 경우 데이터베이스 세션 상태가 유리할 수 있습니다.
* **개발 복잡성**: 서버 세션 상태는 개발이 비교적 간단하지만, 데이터베이스 세션 상태와 클라이언트 세션 상태는 데이터를 변환하는 추가 작업이 필요할 수 있습니다.
