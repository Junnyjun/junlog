# DNS

DNS(Domain Name System)는 인터넷의 핵심 인프라로서, 사람이 이해하기 쉬운 도메인 이름과 기계가 인식하는 IP 주소를 상호 변환하는 역할을 합니다.  
이를 통해 사용자는 복잡한 숫자 대신 친숙한 이름으로 웹사이트나 서비스를 이용할 수 있습니다.  
아래에서는 DNS의 개념, 구조, 작동 원리, 주요 구성 요소, 보안 이슈, 그리고 미래의 발전 방향에 대해 자세히 살펴보겠습니다.

---

## **DNS 란?**

인터넷에서 통신은 기본적으로 **IP 주소**를 통해 이루어집니다. 그러나 숫자로 구성된 IP 주소는 사람이 기억하고 사용하기 어렵기 때문에, **도메인 이름**을 사용하여 접근성을 높입니다. DNS는 이러한 도메인 이름을 해당하는 IP 주소로 변환하거나 그 반대로 변환하는 시스템입니다.

- **도메인 이름 예시**: `www.example.com`
- **IP 주소 예시**: `192.0.2.1` (IPv4), `2001:0db8:85a3:0000:0000:8a2e:0370:7334` (IPv6)

## **DNS의 구조**

DNS는 계층적이고 분산된 데이터베이스 시스템으로, 전 세계에 걸쳐 분산된 서버들을 통해 작동합니다.

### **계층적 네임스페이스**

1. **루트 도메인**: 최상위 계층으로, 도메인 이름의 맨 끝에 위치한 `.`(점)으로 표시됩니다.
2. **최상위 도메인(TLD)**: 루트 도메인 아래에 위치하며, 일반적으로 `.com`, `.org`, `.net`, 국가 코드인 `.kr`, `.jp` 등이 있습니다.
3. **2차 도메인**: TLD 아래에 위치하며, 조직이나 기관의 이름을 나타냅니다. 예를 들어, `example.com`에서 `example`이 2차 도메인입니다.
4. **서브도메인**: 2차 도메인 아래에 추가로 계층을 구성할 수 있습니다. 예: `www.example.com`, `mail.example.com`

### **DNS 서버의 종류**

- **루트 네임 서버**: 최상위 레벨의 DNS 서버로, TLD 서버의 위치 정보를 제공합니다. 전 세계에 13개의 논리적 루트 서버가 존재하며, 물리적으로는 여러 대로 구성되어 있습니다.
- **TLD 네임 서버**: 특정 TLD에 대한 권한을 가지며, 해당 TLD 내의 2차 도메인 정보를 관리합니다.
- **권한 있는 네임 서버(Authoritative Name Server)**: 특정 도메인에 대한 공식적인 DNS 정보를 보유하고 있습니다.
- **재귀적 네임 서버(Recursive Resolver)**: 클라이언트의 질의에 대해 필요한 정보를 찾아서 응답해주는 서버로, ISP나 기업에서 제공됩니다.

## **DNS의 작동 원리**

### **도메인 이름 해석 과정**

1. **클라이언트 요청**: 사용자가 웹 브라우저에 도메인 이름을 입력하면, 운영 체제는 먼저 로컬 캐시를 확인합니다.
2. **재귀적 질의**: 캐시에 정보가 없으면 재귀적 네임 서버에 질의합니다.
3. **루트 서버 질의**: 재귀적 네임 서버는 루트 네임 서버에 해당 도메인의 TLD 서버 위치를 요청합니다.
4. **TLD 서버 질의**: TLD 네임 서버에 해당 도메인의 권한 있는 네임 서버 위치를 요청합니다.
5. **권한 있는 네임 서버 질의**: 최종적으로 권한 있는 네임 서버에서 도메인 이름에 대한 IP 주소를 획득합니다.
6. **응답 전달**: 얻은 IP 주소를 클라이언트에게 전달하고, 클라이언트는 해당 서버에 접속합니다.

### **예시**

- 사용자가 `www.example.com`에 접속할 때 위의 과정을 거쳐 IP 주소를 획득합니다.

## **DNS 레코드 타입**

DNS는 다양한 레코드 타입을 통해 여러 종류의 정보를 제공합니다.
```
- **A 레코드(Address Record)**: 도메인 이름을 IPv4 주소에 매핑합니다.
- **AAAA 레코드**: 도메인 이름을 IPv6 주소에 매핑합니다.
- **CNAME 레코드(Canonical Name Record)**: 하나의 도메인 이름을 다른 도메인 이름에 별칭으로 연결합니다.
- **MX 레코드(Mail Exchange Record)**: 이메일 수신을 위한 메일 서버 정보를 지정합니다.
- **NS 레코드(Name Server Record)**: 도메인의 권한 있는 네임 서버를 지정합니다.
- **TXT 레코드(Text Record)**: 도메인에 대한 임의의 텍스트 정보를 저장합니다. SPF(Sender Policy Framework) 설정 등에 사용됩니다.
- **SRV 레코드(Service Record)**: 특정 서비스에 대한 위치 정보를 제공합니다.
- **PTR 레코드(Pointer Record)**: IP 주소를 도메인 이름으로 역매핑합니다.
```

## **DNS의 주요 프로토콜과 확장 기능**

### **DNSSEC(DNS Security Extensions)**

- **필요성**: DNS는 기본적으로 보안 기능이 부족하여 데이터 위변조와 같은 공격에 취약합니다.
- **기능**: DNS 응답에 디지털 서명을 추가하여 데이터의 무결성과 인증을 보장합니다.
- **구성 요소**:
    - **RRSIG**: 리소스 레코드 세트에 대한 디지털 서명 정보.
    - **DNSKEY**: 공개 키를 저장하여 서명 검증에 사용.
    - **DS 레코드**: 도메인 간 신뢰 체인을 구축하기 위한 정보.

### **EDNS(Extension Mechanisms for DNS)**

- **필요성**: 기존 DNS 프로토콜의 한계를 극복하기 위해 확장된 기능을 제공합니다.
- **기능**: 패킷 크기 확장, DNSSEC 지원, 추가적인 플래그와 옵션 제공.

### **DNS over HTTPS(DoH)와 DNS over TLS(DoT)**

- **필요성**: DNS 질의 및 응답을 암호화하여 프라이버시와 보안을 강화합니다.
- **DoH**: HTTPS 프로토콜을 사용하여 DNS 트래픽을 암호화합니다.
- **DoT**: TLS 프로토콜을 통해 DNS 트래픽을 암호화합니다.

## **DNS의 보안 이슈와 대응 방안**

### **DNS 캐시 포이즈닝(Cache Poisoning)**

- **개념**: 공격자가 재귀적 네임 서버의 캐시에 위조된 DNS 레코드를 주입하여 사용자를 악의적인 사이트로 유도합니다.
- **대응 방안**: DNSSEC 도입, 캐시 무작위화, 소스 포트 랜덤화.

### **DNS 스푸핑(Spoofing)**

- **개념**: 공격자가 DNS 응답을 위조하여 사용자를 가짜 사이트로 유도합니다.
- **대응 방안**: 트랜잭션 ID 강화, 암호화된 DNS 사용.

### **DDoS 공격**

- **개념**: 대량의 DNS 요청을 통해 DNS 서버의 자원을 고갈시켜 서비스를 마비시킵니다.
- **대응 방안**: 트래픽 모니터링, Anycast 기술을 통한 부하 분산, 방화벽 설정 강화.

## **DNS와 인터넷 인프라**

### **CDN(Content Delivery Network)과 DNS**

- **역할**: CDN은 전 세계에 분산된 서버를 통해 사용자에게 콘텐츠를 효율적으로 전달합니다.
- **DNS의 활용**: 지리적으로 가장 가까운 CDN 서버로 사용자를 유도하기 위해 DNS 로드 밸런싱을 사용합니다.

### **부하 분산과 고가용성**

- **방법**: 여러 IP 주소를 가진 A 레코드를 설정하거나, DNS 라운드 로빈 방식을 통해 트래픽을 분산시킵니다.
- **이점**: 서버 과부하 방지, 서비스 가용성 향상.

## **DNS의 미래와 발전 방향**

### **IPv6 지원 확대**

- **필요성**: IP 주소 고갈 문제를 해결하기 위해 IPv6 도입이 가속화되고 있으며, DNS의 AAAA 레코드를 통해 IPv6 주소를 지원합니다.

### **보안 강화와 프라이버시 보호**

- **DNSSEC의 보급**: 데이터 무결성 보장을 위해 DNSSEC의 채택이 확대되고 있습니다.
- **암호화된 DNS 통신**: DoH와 DoT의 활용으로 DNS 질의의 기밀성을 높입니다.

### **분산형 DNS**

- **개념**: 블록체인 기술 등을 활용하여 중앙 집중식 관리 없이 DNS 정보를 분산 저장합니다.
- **이점**: 검열에 대한 저항성, 단일 장애점 제거.
