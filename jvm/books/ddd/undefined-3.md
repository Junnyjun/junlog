# 도메인의 격리

생각보다 도메인에서 발생하는 문제는 시스템에서 작은 요소인 경우가 많다.\
시스템에서 도메인과 관련이 적은 기능으로부터 도메인을 분리할 필요가 있으며, 다른 개념과 혼동하는 문제를 방지할 수 있습니다

## LAYERED ARCHITECTURE

소프트웨어 프로그램에는 갖가지 작업을 수행하는 설계와 코드가 포함되어 있다.

객체지향 프로그램에서는 종종 UI와 데이터베이스나 다른 보조적인 유틸기능을 비즈니스 객체안에 작성하기도 한다. 부가적인 업무로직은 UI나 데이터베이스에 들어가기도 하는데, 가장 편하고 빠르게 동작하게하는 방식이기 때문이다.

<img src="../../../.gitbook/assets/file.excalidraw (1).svg" alt="" class="gitbook-drawing">

하지만 이런 도메인과 관련되지 않은 코드가 상당량 존재하게되면 도메인에 관련된 코드를 추론하고 이해하기 어려워지게된다. 또한 UI의 변경이 도메인&비즈니스 로직의 변경으로 이어지는 경우가 생기기도 한다.

### 관심사의 분리

복잡한 작업을 하는 프로그램일 수록 `관심사`를 분리할 필요가 생긴다.\
특정 기능을 하는, 구성요소를 서로 다른 영역(= 관심사)로 분리한다는 것을 의미한다

이는 기능적, 도메인적 분리가 될수있으며 각 관심사는 메시지를 통해 주고받으며,\
각 관심사는 독립적으로 작동해야 한다

| 종류     | 설명                                                    |
| ------ | ----------------------------------------------------- |
| UI     | 정보를 보여주고 명령을 해석하는 일을 한다 다른 시스템의 접근도 포함된다              |
| 응용 계층  | 작업을 조정하고 아래계층의 기능을 pecade로 묶어주는 역할을한다                 |
| 도메인    | 업무 개념과 규칙을 표현해준다. 업무 상황을 반영하는 상태를 제어하고, 사용한다          |
| 인프라스트럭 | <p>기술적 기능을 제공한다 <br>데이터베이스, 영속화, 메시지 전송 API콜등이 있다</p> |

복잡한 코드를 여러 계층으로 나눠 계층별 응집도를 높이고 결합을 느슨하게 유지하게한다.

## 계층 간 관계 설정

계층별 설계를 해도 각 계층은 서로 연결되는데, 이때 분리도를 잃지 않기위해 각종 패턴이 존재한다.\
각 계층은 한 방향으로만 의존성을 두어 느슨하게 결합되게 하며, 상위와 소통하는 경우 콜백이나 관찰자 패턴을 활용하는 것이 용이하다.

<img src="../../../.gitbook/assets/file.excalidraw.svg" alt="" class="gitbook-drawing">

응용 계층과 도메인 계층에 UI가 연결되는 MVC패턴은 스프링, NEST및  많은 프레임워크에서 \
채용할 정도로 활용성이 좋다

## 아키텍쳐 프레임워크

계층화의 동작 방식과 각계층이 느슨하게 결합되는 방식은 상당히 직관적이다. \
하지만 일부 기술적&구조적인 문제는 조금더 침습적 형태의 인프라 스트럭쳐가 필요하다.

특정 프레임워크는 특수한 방식으로 구현되야 하는 경우가 있는데, 스프링 시큐리티와 같이 다른 프레임워크 클래스의 하위클래스가 되어야 하는 경우가 있다. 이처럼 프레임워크가 방해가 되는 경우도 존재한다.

### &#x20;도메인 계층은 모델이 살아가는 곳

도메인 계층은 소프트웨어에서 필요한 개념과 설계요소에 관계되어 있는 모든 것들을 명시하며, \
업무 로직에 설계와 구현으로 구성된다.

특정 도메인 측면 중에는 객체보다는 행동이나 연산으로 명확하게 표현되는 것도 있다.

## 연관 관계

