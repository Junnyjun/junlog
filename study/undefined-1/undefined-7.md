# 프로세스와 스레드

#### 프로세스 직접 확인하기 <a href="#undefined" id="undefined"></a>

포그라운드 프로세스(foreground process)는 사용자가 볼 수 있는 공간에서 실행되는 프로세스이다.

백그라운드 프로세스(background process)는 사용자가 볼 수 없는 공간에서 실행되는 프로세스이다.

백그라운드 프로세스에는 두 가지 종류가 있는데, 하나는 사용자와 직접 상호작용할 수 있는 프로세스이고, 다른 하나는 사용자와 직접 상호작용할 수 없는 프로세스이다.

사용자와 상호작용하지 않고 백그라운드에서 실행되는 프로세스를 데몬(daemon), 서비스라고 한다.

#### 프로세스 제어 블록 <a href="#undefined" id="undefined"></a>

모든 프로세스는 실행을 위해 CPU를 필요로 한다.

운영체제는 프로세스 제어 블록(Process Control Block, PCB)이라는 자료구조를 사용하여 프로세스를 관리한다.

타이머 인터럽트를 통하여 프로세스를 스위칭한다.

프로세스 제어 블록에는 프로세스의 상태, 프로그램 카운터, 레지스터, 스택 포인터, 스택, 프로세스 번호, 프로세스 우선순위, 프로세스가 사용하는 자원 등이 포함되어 있다.

프로세스 ID(Process ID, PID): 프로세스를 구분하기 위한 고유한 번호이다.\
레지스터 값: 프로세스가 실행되는 동안 변경되는 값이다. 프로그램 카운터를 비롯한 레지스터 값들이 담긴다.\
프로세스 상태: 현재 프로세스가 어떤 상태인지를 나타낸다.\
CPU 스케쥴링 정보: 프로세스의 우선순위, 스케쥴 큐에 대한 포인터 등이 포함된다.\
메모리 관리 정보: 프로세스가 사용하는 메모리의 주소 범위, 페이지 테이블에 대한 포인터 등이 포함된다.\
사용한 파일과 입출력장치목록: 프로세스가 사용하는 입출력 장치에 대한 포인터 등이 포함된다.

#### 문맥 교환 <a href="#undefined" id="undefined"></a>

문맥: 프로세스 수행을 재개하기 위해 기억해야할 중간 정보를 말한다.

문맥 교환(context switch)은 프로세스가 CPU를 사용하다가 다른 프로세스가 CPU를 사용하도록 하는 것을 말한다.

#### 프로세스의 메모리 영역 <a href="#undefined" id="undefined"></a>

프로세스는 사용자 영역에 코드 영역, 데이터 영역, 힙 영역, 스택 영역으로 나뉘어 저장된다.

코드 영역(텍스트 영역): 기계어로 이루어진 명령어가 저장된다. 쓰기가 금지되어 있는 읽기 전용(read-only) 영역이다.\
데이터 영역: 전역 변수와 정적 변수가 저장된다. 초기화된 데이터는 데이터 영역에 저장되고, 초기화되지 않은 데이터는 BSS 영역에 저장된다.\
힙 영역: 프로그래머가 직접 할당할 수 있는 영역이다. 메모리 누수가 발생할 수 있으므로 주의해야 한다.\
스택 영역: 함수의 호출과 관계되는 지역 변수와 매개변수가 저장된다. 함수의 호출이 끝나면 스택 영역에서 제거된다.

### 10.2 프로세스 상태와 계층 구조 <a href="#102" id="102"></a>

#### 프로세스 상태 <a href="#undefined" id="undefined"></a>

프로세스 상태는 프로세스가 현재 어떤 작업을 하고 있는지를 나타낸다.

생성 상태: 프로세스를 생성 중인 상태이다. 메모리에 적재되어 PCB를 할당받은 상태이다.\
준비 상태: 프로세스가 메모리에 적재되어 CPU를 기다리는 상태이다. 준비 상태인 프로세스가 실행 상태로 전환되는 것을 디스패치(dispatch)라고 한다.\
실행 상태: 프로세스가 CPU를 점유하고 명령어를 실행하는 상태이다.\
대기 상태: 프로세스가 입출력을 기다리는 상태이다. 입출력이 완료되면 준비 상태로 전환된다.\
종료 상태: 프로세스가 실행을 마치고 종료된 상태이다. 운영체제는 PCB와 메모리를 해제한다.

#### 프로세스 계층 구조 <a href="#undefined" id="undefined"></a>

프로세스는 계층 구조로 관리된다. 부모 프로세스는 자식 프로세스를 생성할 수 있고, 자식 프로세스는 부모 프로세스의 자원을 공유할 수 있다.

부모 프로세스와 자식 프로세스는 별개의 프로세스이므로 각각의 PCB를 가진다.

#### 프로세스 생성 기법 <a href="#undefined" id="undefined"></a>

부모 프로세스는 fork와 exec를 통해 자식 프로세스를 생성할 수 있다.

부모 프로세스는 fork 시스템 호출을 통해 자신의 복사본을 자식 프로세스로 생성한다.

자식 프로세스는 exec 시스템 호출을 통해 자신의 메모리 공간을 다른 프로그램으로 덮어쓴다.

#### 확인 문제 <a href="#undefined" id="undefined"></a>

1. 다음은 프로세스 상태를 보여주는 프로세스 상태 다이어그램입니다.

![](https://velog.velcdn.com/images/doxxx93/post/edd1a85d-195f-4b32-a8eb-4935677b9ad2/image.png)

### 10.3 스레드 <a href="#103" id="103"></a>

여기서 다루는 스레드는 소프트웨어적인 스레드이다.

#### 프로세스와 스레드 <a href="#undefined" id="undefined"></a>

스레드(thread)는 프로세스를 구성하는 실행 흐름의 단위이다. 프로세스는 하나 이상의 스레드를 가질 수 있다.

많은 프로그램은 하나의 프로세스에서 여러 개의 스레드를 생성하여 병렬 처리를 수행한다. 이러한 프로그램을 멀티스레드 프로그램이라고 한다.

스레드는 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택으로 구성된다. 실행에 필요한 죄소한의 정보를 갖고 있다.

스레드는 프로세스의 자원을 공유한다.

#### 멀티프로세스와 멀티스레드 <a href="#undefined" id="undefined"></a>

여러 프로세스를 동시에 실행하는 것을 멀티프로세싱, 여러 스레드로 프로세스를 동시에 실행하는 것을 멀티스레딩이라고 한다.

프로세스 끼리는 자원을 공유할 수 없지만, 스레드는 프로세스의 자원을 공유할 수 있다.
